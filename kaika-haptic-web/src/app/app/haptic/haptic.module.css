/* src/app/app/haptic/haptic.module.css */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500;700&display=swap');

/* ─── Main Layout & Backgrounds ─── */
.main {
  background-color: transparent;
  color: var(--kaika-white); /* デフォルト文字色を明るく */
  min-height: 100vh;
  font-family: var(--kaika-font-sans);
  position: relative; /* For fixed/absolute children */
  overflow-x: hidden;
  display: flex; /* Use flex to manage header and content */
  flex-direction: column;
  Z-index: 0; /* Ensure main is below header */
}

/* --- AnimatedBackground コンポーネントが背景を担当 --- */
/* 以前の .gradientBackground, .backgroundVideoContainer, .backgroundVideo は削除 */

/* ドットグリッド (AnimatedBackground コンポーネントの CSS に移動推奨だが、ここに残す場合) */
.dotGrid {
  position: fixed; /* or absolute if .main is the reference */
  inset: 0;
  background-image: radial-gradient(var(--kaika-mid-grey) 0.5px, transparent 0.5px);
  background-size: 15px 15px;
  opacity: 0.08; /* 少し濃く */
  z-index: -2; /* 背景アニメーションよりさらに後ろ */
  pointer-events: none;
}

/* パーティクルエフェクト */
.particleContainer {
  position: fixed;
  inset: 0;
  z-index: -1; /* ドットグリッドと背景アニメの間 */
  pointer-events: none;
  overflow: hidden;
}
.particleEffect {
  position: absolute;
  width: 4px; /* Smaller particles */
  height: 4px;
  /* CSS変数 --haptic-color を参照 */
  background-color: var(--haptic-color, rgba(255, 107, 0, .15));
  border-radius: 50%;
  opacity: 0;
  filter: blur(1.5px);
  animation: particle-float 18s infinite ease-in-out alternate;
  transform-origin: center center;
  transition: background-color 0.5s ease;
}
.particleEffect.active {
   /* CSS変数 --haptic-intensity を参照 */
   opacity: calc(var(--haptic-intensity, 0.5) * 0.7 + 0.1);
   animation-duration: calc(25s / (var(--haptic-intensity, 0.5) + 0.5));
}
.particleEffect::before, .particleEffect::after { /* Example */
    content: ''; position: absolute; width: 100%; height: 100%;
    background: inherit; border-radius: inherit; opacity: inherit; filter: inherit; animation: inherit;
}
.particleEffect::before { animation-delay: -6s; left: 30%; top: 70%; width: 3px; height: 3px; }
.particleEffect::after { animation-delay: -11s; left: 65%; top: 40%; width: 5px; height: 5px; }

@keyframes particle-float {
  0% { transform: translateY(0vh) translateX(0vw) scale(0.8); opacity: 0.1; }
  50% { transform: translateY(-40vh) translateX(8vw) scale(1.1); opacity: 0.7; }
  100% { transform: translateY(0vh) translateX(-8vw) scale(0.8); opacity: 0.1; }
}

/* ─── Header ─── */
.header {
  height: var(--header-height);
  padding: 0 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between; /* Logo left, Info right */
  background-color: rgba(10, 10, 10, 0.75);
  backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 100;
  border-bottom: 1px solid rgba(255, 107, 0, 0.15); /* オレンジ境界線 */
}

.logo { /* Link Component */
    display: block; /* Prevents potential layout shifts with Image */
    line-height: 0; /* Remove extra space below image */
    margin-right: 1rem; /* Space after logo */
}
/* Next/Image needs no specific style here if width/height provided */

/* データコレクターへのリンク */
.dataCollectorLink {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--kaika-light-grey);
  text-decoration: none;
  padding: 0.4rem 1rem;
  border-radius: 6px;
  transition: color 0.2s ease, background-color 0.2s ease;
  margin-left: auto; /* Push itself right, creating space after logo */
  margin-right: 1.5rem; /* Space before wallet info */
  white-space: nowrap;
}
.dataCollectorLink:hover {
  color: var(--kaika-white);
  background-color: rgba(255, 255, 255, 0.1);
}

.walletInfo {
  display: flex;
  align-items: center;
  gap: 1rem;
}
.balanceContainer {
  display: flex;
  gap: 1rem;
  padding: 0.4rem 0.8rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.08);
}
.balanceItem { display: flex; flex-direction: column; align-items: flex-end; }
.balanceLabel { font-size: 0.7rem; color: var(--kaika-light-grey); text-transform: uppercase; }
.balanceValue { font-weight: 700; font-size: 0.9rem; color: var(--kaika-usdc-blue-light); } /* USDC */
.kaikaBalance { font-weight: 700; font-size: 0.9rem; color: var(--kaika-orange); }
.walletAddress {
  background-color: rgba(255, 255, 255, 0.08); padding: 0.4rem 0.8rem; border-radius: 6px;
  font-size: 0.8rem; font-family: var(--kaika-font-mono); color: var(--kaika-light-grey); cursor: help;
  border: 1px solid rgba(255, 255, 255, 0.1); white-space: nowrap; transition: background-color 0.2s ease;
}
.walletAddress:hover { background-color: rgba(255, 255, 255, 0.15); }

/* デバイス接続ボタン */
.connectDeviceButton {
  background: rgba(42, 42, 42, 0.8); /* Darker background */
  border: 1px solid var(--kaika-mid-grey);
  color: var(--kaika-light-grey);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  backdrop-filter: blur(5px);
}
.connectDeviceButton:hover:not(:disabled) {
  border-color: var(--kaika-mint-green); color: var(--kaika-mint-green);
  background-color: rgba(0, 255, 163, 0.1); box-shadow: 0 0 8px rgba(0, 255, 163, 0.2);
}
.connectDeviceButton.connected { border-color: var(--kaika-mint-green); color: var(--kaika-mint-green); }
.connectDeviceButton.connecting { cursor: default; opacity: 0.7; border-color: var(--kaika-grey); color: var(--kaika-grey); }
.connectDeviceButton:disabled { opacity: 0.5; cursor: not-allowed; border-color: var(--kaika-grey); color: var(--kaika-grey); }
.connectionSpinner { border: 2px solid rgba(0, 255, 163, 0.3); border-top: 2px solid var(--kaika-mint-green); border-radius: 50%; width: 14px; height: 14px; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* WalletMultiButton */
.walletButton {} /* Wrapper class */
.walletButton :global(.wallet-adapter-button-trigger) {
    background-color: var(--kaika-orange) !important; color: var(--kaika-black) !important; border: none !important;
    border-radius: 6px !important; padding: 0.6rem 1rem !important; font-weight: 700 !important;
    font-size: 0.9rem !important; transition: background-color 0.3s ease, transform 0.1s ease !important;
}
.walletButton :global(.wallet-adapter-button-trigger:hover) {
    background-color: var(--kaika-orange-dark) !important; transform: scale(1.03);
}


/* ─── Content Wrapper & Layout ─── */
.contentWrapper {
  flex: 1; display: flex; padding: 2rem 1.5rem; /* Consistent padding */
  max-width: 1600px; width: 100%; margin: 0 auto; gap: 2rem;
  align-items: flex-start; flex-wrap: wrap; /* Allow wrapping */
  position: relative;
  z-index: 1;
}

/* ─── Left Panel: Controls + Visualizer ─── */
.controlPanel {
  flex: 1 1 400px; min-width: 360px; /* Min width before wrap */
  display: flex; flex-direction: column; gap: 1.5rem;
  position: sticky; top: calc(var(--header-height) + 2rem); align-self: flex-start;
  max-height: calc(100vh - var(--header-height) - 4rem); overflow-y: auto;
  background: rgba(18, 18, 18, 0.8); /* Darker glass */
  backdrop-filter: blur(16px) saturate(140%); -webkit-backdrop-filter: blur(16px) saturate(140%);
  border-radius: 16px; padding: 1.8rem;
  border: 1px solid rgba(255, 107, 0, 0.15); /* Orange border */
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.35);
  /* Hide scrollbar */
  -ms-overflow-style: none; scrollbar-width: none;
}
.controlPanel::-webkit-scrollbar { display: none; }

/* Section Base Style */
.section {
    background: rgba(28, 28, 28, 0.6); /* Slightly lighter inner section bg */
    padding: 1.5rem; border-radius: 12px; /* Inner radius */
    border: 1px solid rgba(255, 255, 255, 0.05); /* Subtle inner border */
}
.section h2 {
    font-size: 1.1rem; font-weight: 600; /* Adjusted weight */ margin-top: 0; margin-bottom: 1.2rem; /* More space */
    color: var(--kaika-white); border-bottom: 1px solid rgba(255, 107, 0, 0.2); padding-bottom: 0.6rem;
}

/* Haptic Controls Section */
.controlsGrid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; align-items: center; }
.controlItem { display: flex; flex-direction: column; gap: 0.5rem; }
.sliderLabel { font-size: 0.85rem; color: var(--kaika-light-grey); font-weight: 500; }
.slider { appearance: none; width: 100%; height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; outline: none; cursor: pointer; transition: background 0.2s ease; }
.slider::-webkit-slider-thumb { appearance: none; width: 16px; height: 16px; background: var(--kaika-orange); border-radius: 50%; cursor: pointer; box-shadow: 0 0 8px var(--kaika-orange-light-glow); }
.slider::-moz-range-thumb { width: 16px; height: 16px; background: var(--kaika-orange); border-radius: 50%; cursor: pointer; border: none; box-shadow: 0 0 8px var(--kaika-orange-light-glow); }
.slider:disabled { cursor: not-allowed; opacity: 0.5; }
.slider:disabled::-webkit-slider-thumb { background: var(--kaika-grey); box-shadow: none; }
.slider:disabled::-moz-range-thumb { background: var(--kaika-grey); box-shadow: none; }
.sliderValue { font-size: 0.8rem; color: var(--kaika-light-grey); text-align: right; font-family: var(--kaika-font-mono); }

/* Visualizer Section */
.visualizer { min-height: 400px; display: flex; flex-direction: column; }
.visualizerContent { margin-top: 1rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
.placeholderText { color: var(--kaika-light-grey); font-style: italic; text-align: center; margin: auto; font-size: 0.9rem; padding: 2rem 0; }
.feelingDetails { margin-bottom: 1.5rem; }
.feelingTitle { display: flex; align-items: baseline; gap: 0.5rem; margin-bottom: 0.5rem; }
.feelingNameLarge { font-size: 1.4rem; font-weight: 700; color: var(--kaika-white); }
.feelingCategoryTag { font-size: 0.7rem; font-weight: 600; padding: 0.15rem 0.4rem; border-radius: 4px; text-transform: uppercase; color: var(--kaika-black); }
.feelingCategoryTag.nature { background-color: rgba(76,175,80,.8); }
.feelingCategoryTag.urban { background-color: rgba(33,150,243,.8); }
.feelingCategoryTag.abstract { background-color: rgba(156,39,176,.8); }
.feelingDescriptionLarge { font-size: 0.9rem; color: var(--kaika-light-grey); line-height: 1.5; }
.attributesGrid { display: grid; grid-template-columns: 1fr; gap: 0.8rem; margin-bottom: 1.5rem; }
.attributeItem { display: flex; align-items: center; gap: 0.8rem; }
.attributeLabel { font-size: 0.8rem; color: var(--kaika-light-grey); width: 70px; text-align: right; flex-shrink: 0; }
.attributeBar { flex-grow: 1; height: 8px; background-color: rgba(255, 255, 255, 0.1); border-radius: 4px; overflow: hidden; }
.attributeFill { height: 100%; background: linear-gradient(90deg, var(--kaika-orange), var(--kaika-orange-dark)); border-radius: 4px; transition: width 0.5s ease-out; }
.temperatureFill { /* Inline style sets color */ }
.attributeValue { font-size: 0.8rem; font-family: var(--kaika-font-mono); color: var(--kaika-white); width: 20px; text-align: right; flex-shrink: 0; }
.playbackControls { margin-top: 1.5rem; text-align: center; }
.playButton { background: var(--kaika-orange); color: var(--kaika-black); border: none; padding: 0.8rem 2rem; border-radius: 25px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; justify-content: center; }
.playButton:hover:not(:disabled) { background: var(--kaika-orange-dark); transform: scale(1.05); }
.playButton.playing { background: var(--kaika-mid-grey); color: var(--kaika-white); }
.playButton.playing:hover:not(:disabled) { background: var(--kaika-grey); }
.playButton:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; background: var(--kaika-dark-grey) !important; }
.hapticZones { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin-top: 1.5rem; height: 10px; }
.zone { background-color: rgba(255, 255, 255, 0.1); border-radius: 2px; transition: background-color 0.3s ease, box-shadow 0.3s ease; }
.zone.active { background-color: var(--kaika-orange); box-shadow: 0 0 8px var(--kaika-orange-glow); }
.deviceStatus { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1); display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.8rem; color: var(--kaika-light-grey); }
.statusIndicator { width: 8px; height: 8px; border-radius: 50%; transition: background-color 0.3s ease, box-shadow 0.3s ease; }
.statusIndicator.connected { background-color: var(--kaika-mint-green); box-shadow: 0 0 5px var(--kaika-mint-green); }
.statusIndicator.disconnected { background-color: var(--kaika-grey); }
.statusText { /* unchanged */ }
.transmittingText { margin-left: 0.5rem; font-style: italic; opacity: 0.8; color: var(--kaika-orange); }


/* ─── Right Panel: Marketplace / Portfolio / Info ─── */
.contentPanel {
  flex: 2 1 500px; /* Flex properties */
  display: flex; flex-direction: column; gap: 2rem;
  /* Glassmorphism for right panel too (optional) */
  /* background: rgba(18, 18, 18, 0.8); */
  /* backdrop-filter: blur(16px) saturate(140%); */
  /* border-radius: 16px; */
  /* padding: 1.5rem; */
  /* border: 1px solid rgba(255, 107, 0, 0.1); */
  max-height: calc(100vh - var(--header-height) - 3rem); overflow-y: auto;
   /* Hide scrollbar */
   -ms-overflow-style: none; scrollbar-width: none;
}
.contentPanel::-webkit-scrollbar { display: none; }

/* Purchase Status Message */
.statusMessage { padding: 0.8rem 1rem; border-radius: 8px; font-size: 0.9rem; font-weight: 500; margin-bottom: 1rem; border: 1px solid transparent; text-align: center; }
.success { background-color: rgba(0, 255, 163, 0.1); border-color: rgba(0, 255, 163, 0.5); color: var(--kaika-mint-green); }
.error { background-color: rgba(255, 77, 77, 0.1); border-color: rgba(255, 77, 77, 0.5); color: #ff4d4d; }
.pending { background-color: rgba(33, 150, 243, 0.1); border-color: rgba(33, 150, 243, 0.5); color: #5fa9f8; }

/* Section Header (共通化) */
.sectionHeader { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 0.8rem; border-bottom: 1px solid rgba(255, 107, 0, 0.15); } /* Increased bottom margin/padding */
.sectionHeader h2 { font-size: 1.4rem; font-weight: 700; margin: 0; color: var(--kaika-white); }
/* Toggle Button for Portfolio/History */
.toggleViewButton { background: none; border: 1px solid var(--kaika-light-grey); color: var(--kaika-light-grey); padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; cursor: pointer; transition: all 0.2s ease; }
.toggleViewButton:hover { border-color: var(--kaika-white); color: var(--kaika-white); background-color: rgba(255, 255, 255, 0.1); }

/* Category Filters */
.categoryFilters { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.categoryButton { background-color: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: var(--kaika-light-grey); padding: 0.4rem 1rem; border-radius: 15px; font-size: 0.8rem; font-weight: 500; cursor: pointer; transition: all 0.2s ease; }
.categoryButton:hover { background-color: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2); color: var(--kaika-white); }
.categoryButton.active { background-color: var(--kaika-orange); border-color: var(--kaika-orange); color: var(--kaika-black); font-weight: 600; }


/* Feelings Section (Marketplace / Portfolio) */
.section.feelingsSection { /* Base section style applied from .section */ }
/* Grid Layout */
.feelingsGrid { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1.5rem; } /* Adjusted minmax */
.feelingGridItem { background: var(--kaika-dark-grey); /* Darker cards */ border-radius: 12px; overflow: hidden; border: 1px solid rgba(255, 107, 0, 0.1); /* Orange subtle border */ transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; position: relative; display: flex; flex-direction: column; }
.feelingGridItem:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4); border-color: rgba(255, 107, 0, 0.3); }
.feelingGridItem.selected { border-color: var(--kaika-orange); box-shadow: 0 0 18px var(--kaika-orange-light-glow); }
.feelingGridItem.owned { /* specific owned styles if needed */ }
.feelingGridItem.notOwned { /* specific not owned styles if needed */ }
/* Category border */
.feelingGridItem.nature { border-left: 4px solid rgba(76,175,80,.7); }
.feelingGridItem.urban { border-left: 4px solid rgba(33,150,243,.7); }
.feelingGridItem.abstract { border-left: 4px solid rgba(156,39,176,.7); }

.feelingContent { padding: 1.2rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
.feelingInfo { margin-bottom: 1rem; }
.feelingHeader { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 0.5rem; }
.feelingName { font-size: 1.05rem; font-weight: 600; color: var(--kaika-white); }
.feelingDescription { font-size: 0.85rem; color: var(--kaika-light-grey); margin-bottom: 1rem; line-height: 1.5; flex-grow: 1; /* Allow description to take space */ }
.feelingMetrics { display: flex; gap: 1rem; font-size: 0.75rem; color: var(--kaika-light-grey); margin-top: 0.5rem; }
.metric { display: flex; gap: 0.3rem; align-items: baseline;}
.metricLabel { font-weight: 500; }
.metricValue { font-family: var(--kaika-font-mono); color: var(--kaika-white); }
.feelingPrice { font-weight: 700; color: var(--kaika-usdc-blue-light); margin-top: 0.5rem; text-align: right; font-size: 0.95rem; }

.buttons { margin-top: auto; padding-top: 1rem; display: flex; justify-content: center; align-items: center; min-height: 40px; }
.loader { border: 3px solid rgba(255, 255, 255, 0.2); border-top: 3px solid var(--kaika-white); border-radius: 50%; width: 20px; height: 20px; animation: spin 0.8s linear infinite; margin: 0 auto; }

/* Select Button (Action Button) */
.actionButton { background: var(--kaika-mid-grey); color: var(--kaika-light-grey); border: 1px solid #444; padding: 0.6rem 1.2rem; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; width: 100%; }
.actionButton:hover:not(:disabled) { background: #444; color: var(--kaika-white); border-color: #666; }
.actionButton.selected { background: var(--kaika-orange); color: var(--kaika-black); border-color: var(--kaika-orange); cursor: default; }
.actionButton:disabled { opacity: 0.5; cursor: not-allowed; background: var(--kaika-dark-grey) !important; border-color: #333 !important; color: #777 !important;}

/* Purchase Button */
.purchaseButton { background: var(--kaika-usdc-blue); color: var(--white); border: none; padding: 0.6rem 1.2rem; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: background-color 0.2s ease, opacity 0.2s ease, transform 0.1s ease; width: 100%; }
.purchaseButton:hover:not(:disabled) { background: var(--kaika-usdc-blue-light); transform: scale(1.02); }
.purchaseButton.purchasing { opacity: 0.7; cursor: default; }
.purchaseButton:disabled { opacity: 0.5; cursor: not-allowed; background: var(--kaika-grey); transform: none; }

/* NFT Badge */
.nftBadge { position: absolute; top: 0.7rem; right: 0.7rem; background: linear-gradient(45deg, var(--kaika-orange), var(--kaika-orange-dark)); color: var(--kaika-black); font-size: 0.6rem; font-weight: 700; padding: 0.15rem 0.4rem; border-radius: 4px; text-transform: uppercase; cursor: help; box-shadow: 0 1px 3px rgba(0,0,0,0.3); }

/* Transaction History View */
.transactionHistory { max-height: 500px; overflow-y: auto; padding-right: 0.5rem; }
.transactionList { list-style: none; padding: 0; margin: 0; }
.transactionItem { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.08); gap: 1rem; }
.transactionItem:last-child { border-bottom: none; }
.transactionInfo { display: flex; flex-direction: column; gap: 0.1rem; }
.transactionName { font-size: 0.9rem; font-weight: 500; color: var(--kaika-white); }
.transactionDate { font-size: 0.75rem; color: var(--kaika-light-grey); }
.transactionDetails { display: flex; align-items: center; gap: 1rem; text-align: right; flex-wrap: wrap; justify-content: flex-end; }
.transactionAmount { font-size: 0.9rem; font-weight: 500; color: var(--kaika-usdc-blue-light); font-family: var(--kaika-font-mono); }
.transactionHash { font-size: 0.75rem; color: var(--kaika-light-grey); font-family: var(--kaika-font-mono); text-decoration: none; transition: color 0.2s ease; }
.transactionHash:hover { color: var(--kaika-accent-cyan); }
.transactionStatus { font-size: 0.7rem; font-weight: 600; padding: 0.15rem 0.4rem; border-radius: 4px; text-transform: uppercase; white-space: nowrap; }
.transactionStatus.confirmed { background-color: rgba(0, 255, 163, 0.2); color: var(--kaika-mint-green); }
.transactionStatus.pending { background-color: rgba(33, 150, 243, 0.2); color: #5fa9f8; }
.transactionStatus.failed { background-color: rgba(255, 77, 77, 0.2); color: #ff4d4d; }
.noTransactions { text-align: center; color: var(--kaika-light-grey); font-style: italic; padding: 2rem 0; }

/* Premium Section */
.section.premiumSection { margin-top: 1rem; }
.premiumBanner { background: linear-gradient(45deg, rgba(156,39,176,.2), rgba(0, 255, 255, 0.1)); padding: 1.5rem; border-radius: 12px; text-align: center; border: 1px solid rgba(156,39,176,.5); }
.premiumBanner h3 { margin-top: 0; margin-bottom: 0.5rem; color: var(--kaika-white); font-size: 1.1rem; }
.premiumBanner p { margin-bottom: 1rem; font-size: 0.9rem; color: var(--kaika-light-grey); }
.waitlistButton { background: var(--kaika-white); color: var(--kaika-black); border: none; padding: 0.6rem 1.5rem; border-radius: 20px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: transform 0.2s ease, background-color 0.2s ease; }
.waitlistButton:hover { transform: scale(1.05); background-color: #eee; }

/* Contract Info Section */
.section.contractInfo { /* unchanged */ }
.contractGrid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-top: 1rem; }
.contractItem { background-color: rgba(255, 255, 255, 0.03); padding: 0.8rem; border-radius: 8px; }
.contractLabel { display: block; font-size: 0.75rem; color: var(--kaika-light-grey); margin-bottom: 0.2rem; }
.contractValue { display: block; font-size: 0.9rem; font-weight: 500; color: var(--kaika-white); font-family: var(--kaika-font-mono); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

@media (max-width: 768px) {

  /* --- ヘッダー調整 --- */
  .header {
    padding: 0 1rem; /* 左右のパディングを減らす */
    height: calc(var(--header-height) - 10px); /* ヘッダーを少し低くする (任意) */
  }
  .walletInfo {
    gap: 0.5rem; /* 要素間の隙間を減らす */
  }
  /* 例: スマホでは残高表示を隠す */
  .balanceContainer {
    display: none;
  }
  /* 例: ウォレットアドレス表示を少し小さく */
  .walletAddress {
     font-size: 0.7rem;
     padding: 0.3rem 0.6rem;
  }
  /* デバイス接続ボタンを小さく */
  .connectDeviceButton {
    font-size: 0.8rem;
    padding: 0.4rem 0.8rem;
  }
  /* ウォレット接続ボタンを小さく */
  .walletButton :global(.wallet-adapter-button-trigger) {
     font-size: 0.8rem !important;
     padding: 0.5rem 0.8rem !important;
  }
  /* データコレクターリンク調整 */
  .dataCollectorLink {
    font-size: 0.8rem;
    padding: 0.3rem 0.6rem;
    margin-right: 0.8rem;
  }


  /* --- メインレイアウト: 縦積みに変更 --- */
  .contentWrapper {
    flex-direction: column; /* ★ パネルを縦積みに */
    padding: 1rem; /* 全体のパディングを減らす */
    gap: 1.5rem; /* パネル間の隙間調整 */
  }

  /* --- コントロールパネル (左側) 調整 --- */
  .controlPanel {
    position: static; /* ★ sticky を解除 */
    flex: none; /* flexの比率指定を解除 */
    width: 100%; /* 幅を100%に */
    max-height: none; /* 最大高さを解除 */
    padding: 1rem; /* パディング調整 */
    order: 2; /* ★ 表示順序をコンテンツパネルの下に (任意) */
    /* スクロールバー表示設定 (必要なら) */
    overflow-y: visible;
    -ms-overflow-style: auto;
    scrollbar-width: auto;
  }
  .controlPanel::-webkit-scrollbar { display: block; }

  .section {
    padding: 1rem; /* セクション内パディング調整 */
  }
  .section h2 {
     font-size: 1.1rem; /* タイトル文字サイズ調整 */
     margin-bottom: 1rem;
     padding-bottom: 0.5rem;
  }

  /* ビジュアライザー調整 */
  .visualizer {
    min-height: auto; /* 最低高さを解除 */
  }
  .feelingNameLarge { font-size: 1.2rem; }
  .feelingDescriptionLarge { font-size: 0.85rem; }
  .attributeLabel { width: 60px; font-size: 0.75rem;}
  .attributeValue { font-size: 0.75rem; }
  .playButton { font-size: 0.9rem; padding: 0.6rem 1.5rem;}


  /* --- コンテンツパネル (右側) 調整 --- */
  .contentPanel {
     flex: none; /* flexの比率指定を解除 */
     width: 100%; /* 幅を100%に */
     max-height: none; /* 最大高さを解除 */
     order: 1; /* ★ 表示順序をコントロールパネルの上に (任意) */
     /* スクロールバー表示設定 (必要なら) */
     overflow-y: visible;
     -ms-overflow-style: auto;
     scrollbar-width: auto;
  }
   .contentPanel::-webkit-scrollbar { display: block; }

  /* セクションヘッダー調整 */
  .sectionHeader {
      flex-direction: column; /* タイトルとボタンを縦積み */
      align-items: flex-start; /* 左揃え */
      gap: 0.8rem; /* 隙間調整 */
      padding-bottom: 1rem;
  }
  .sectionHeader h2 { font-size: 1.25rem; }
  .toggleViewButton { font-size: 0.8rem; padding: 0.4rem 0.8rem;}
  .categoryFilters { justify-content: flex-start; } /* カテゴリボタン左寄せ */
  .categoryButton { font-size: 0.75rem; padding: 0.3rem 0.8rem;}

  /* Feelingグリッド調整 */
  .feelingsGrid {
    /* スマホでは2列表示にする例 */
    grid-template-columns: repeat(2, 1fr);
    /* または、より小さい画面でアイテムを大きく見せる場合 */
    /* grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); */
    gap: 1rem; /* 隙間調整 */
  }
  .feelingGridItem { /* カード調整 */ }
  .feelingName { font-size: 0.9rem; }
  .feelingDescription { font-size: 0.8rem; margin-bottom: 0.8rem; }
  .feelingPrice { font-size: 0.9rem; }
  .actionButton, .purchaseButton { font-size: 0.8rem; padding: 0.5rem 1rem;}
  .nftBadge { font-size: 0.55rem; top: 0.5rem; right: 0.5rem;}

  /* トランザクション履歴調整 */
  .transactionItem {
      flex-direction: column; /* 縦積み */
      align-items: flex-start; /* 左揃え */
      gap: 0.5rem;
  }
  .transactionDetails {
      width: 100%; /* 詳細部分を幅いっぱいに */
      justify-content: space-between; /* 金額とハッシュ/ステータスを両端に */
      gap: 0.5rem;
      text-align: left; /* 左揃え */
  }
  .transactionAmount { font-size: 0.85rem; }
  .transactionHash { font-size: 0.7rem; }
  .transactionStatus { font-size: 0.65rem; }

  /* Premiumセクション調整 */
  .premiumBanner h3 { font-size: 1rem;}
  .premiumBanner p { font-size: 0.85rem;}
  .waitlistButton { font-size: 0.85rem; padding: 0.5rem 1.2rem;}

  /* Contract Info グリッド調整 */
  .contractGrid {
      /* スマホでは2列にする例 */
      grid-template-columns: repeat(2, 1fr);
      gap: 0.8rem;
  }
  .contractLabel { font-size: 0.7rem; }
  .contractValue { font-size: 0.8rem; }

}

/* =========================================== */
/* === さらに小さい画面向け (例: 480px以下) === */
/* =========================================== */
@media (max-width: 480px) {
   .header {
     padding: 0 0.8rem;
     height: calc(var(--header-height) - 15px); /* さらに低く */
   }
   .walletInfo {
      /* 例: ウォレットアドレスも隠す */
      /* .walletAddress { display: none; } */
   }

   /* Feeling グリッドを1列にするなど */
   .feelingsGrid {
      grid-template-columns: 1fr;
      gap: 0.8rem;
   }

   .controlPanel, .contentPanel, .section {
       padding: 0.8rem; /* 全体のパディングをさらに詰める */
   }
   .sectionHeader h2 { font-size: 1.1rem; }
}